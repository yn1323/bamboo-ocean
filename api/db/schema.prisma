datasource db {
  provider   = "postgresql"
  url        = env("DATABASE_URL")
  directUrl  = env("DIRECT_URL")
  extensions = [uuidOssp(map: "uuid-ossp")]
}

generator client {
  provider        = "prisma-client-js"
  binaryTargets   = "native"
  // バグでマイグレート時に毎回DBリセットが必要
  // https://github.com/prisma/prisma/issues/19100
  previewFeatures = ["postgresqlExtensions"]
}

model Type {
  id        String         @id @default(dbgenerated("uuid_generate_v4()"))
  name      String
  fromTypes TypeRelation[] @relation("fromTypes")
  toTypes   TypeRelation[] @relation("toTypes")
}

model TypeRelation {
  id     String @id @default(dbgenerated("uuid_generate_v4()"))
  from   Type   @relation("fromTypes", fields: [fromId], references: [id])
  fromId String
  to     Type   @relation("toTypes", fields: [toId], references: [id])
  toId   String
  ratio  Float
}
